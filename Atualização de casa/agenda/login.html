<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/gerais.css">
    <link rel="stylesheet" href="styles/login.css">
    <title>Tela de Login</title>
</head>
<body>
    <div class="login-container">
        <h2>Senac - Tabo√£o da Serra</h2><hr>
        <h1>Login</h1>
        <div class="box">
            <form action="#" method="post">
                <div class="inputBox">
                    <input type="text" name="username" id="loginTxt" class="inputUser" required>
                    <label class="label_input" for="nome">E-mail cadastrado</label>
                </div>
                <div class="inputBox">
                    <input type="password" name="current-password" id="senhaTxt" class="inputUser" required>
                    <label class="label_input" for="nome">Informe sua senha</label>
                </div>
                <button class="btnSubmit" type="submit" id="btnEntrar">Entrar</button>
                <button class="btnCancel" type="button" class="cancel" id="btnCancelar"><a href="index.html">Cancelar</a></button>
            </form>
        </div>
    </div>    
</body>
<script>
    var btnEnviar = document.querySelector('#btnEntrar');
    btnEnviar.addEventListener('click', async function (event) {
        event.preventDefault();
        
        usuario = document.querySelector('#loginTxt').value;
        senha = document.querySelector('#senhaTxt').value;

        const config = {
            method: "post",
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                nomeJs: usuario, 
                password: senha
            })
        };
        
        const response = await fetch('controller/login.php', config);
        const require = await response.json();
 
        if(require.status == 1){
            window.location.href = 'contatos.html'
        } else{
            alert(require.status)
        }
    });
</script>
</html>